@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══ Design Tokens – Light ═══ */
:root {
  --bg: #f5f5f7;
  --surface-0: #ffffff;
  --surface-1: #f0f0f2;
  --surface-2: #e8e8ed;

  --text: #1d1d1f;
  --text-2: #86868b;
  --text-3: #aeaeb2;

  --border: #d2d2d7;
  --border-subtle: #ebebf0;

  --primary: #007aff;
  --primary-hover: #0062cc;
  --primary-active: #004ea3;
  --primary-text: #ffffff;
  --primary-tint: rgba(0, 122, 255, 0.1);

  --success: #34c759;
  --success-tint: rgba(52, 199, 89, 0.1);

  --warning: #ff9f0a;
  --warning-tint: rgba(255, 159, 10, 0.1);

  --danger: #ff3b30;
  --danger-tint: rgba(255, 59, 48, 0.1);

  --overlay: rgba(0, 0, 0, 0.25);
  --ring: #007aff;

  /* Density — comfortable (default) */
  --ctrl-h: 32px;
  --ctrl-h-sm: 28px;
  --row-h: 40px;
  --titlebar-h: 38px;
}

/* ═══ Design Tokens – Dark ═══ */
.dark {
  --bg: #1c1c1e;
  --surface-0: #2c2c2e;
  --surface-1: #3a3a3c;
  --surface-2: #48484a;

  --text: #f5f5f7;
  --text-2: #98989d;
  --text-3: #636366;

  --border: #38383a;
  --border-subtle: #2c2c2e;

  --primary: #0a84ff;
  --primary-hover: #409cff;
  --primary-active: #64b5f6;
  --primary-text: #ffffff;
  --primary-tint: rgba(10, 132, 255, 0.15);

  --success: #30d158;
  --success-tint: rgba(48, 209, 88, 0.12);

  --warning: #ff9f0a;
  --warning-tint: rgba(255, 159, 10, 0.12);

  --danger: #ff453a;
  --danger-tint: rgba(255, 69, 58, 0.12);

  --overlay: rgba(0, 0, 0, 0.5);
  --ring: #0a84ff;
}

/* ═══ Density – Compact ═══ */
[data-density="compact"] {
  --ctrl-h: 28px;
  --ctrl-h-sm: 24px;
  --row-h: 32px;
  --titlebar-h: 32px;
}

/* ═══ Base Layer ═══ */
@layer base {
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-size: 14px;
    line-height: 1.5;
    overflow: hidden;
    user-select: none;
  }

  *::selection {
    background: var(--primary-tint);
    color: var(--text);
  }

  input, textarea, [contenteditable] {
    user-select: text;
  }

  :focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 1px;
  }

  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px var(--primary-tint);
    border-color: var(--primary);
  }
}

/* ═══ Scrollbar ═══ */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--text-3); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-2); }

/* ═══ Animations ═══ */
@keyframes fade-in { from { opacity: 0 } to { opacity: 1 } }
@keyframes slide-up { from { opacity: 0; transform: translateY(6px) } to { opacity: 1; transform: translateY(0) } }
@keyframes scale-in { from { opacity: 0; transform: scale(0.97) } to { opacity: 1; transform: scale(1) } }

.animate-fade-in { animation: fade-in 0.15s ease-out; }
.animate-slide-up { animation: slide-up 0.2s ease-out; }
.animate-scale-in { animation: scale-in 0.15s ease-out; }

/* ═══ Lua Editor (preserved) ═══ */
.lua-editor-wrapper { font-family: 'SF Mono', 'JetBrains Mono', 'Menlo', monospace; }
.lua-editor-line { margin: 0; padding: 0; }
